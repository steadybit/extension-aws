// SPDX-License-Identifier: MIT
// SPDX-FileCopyrightText: 2023 Steadybit GmbH

package extecs

import "math"

const (
	ecsTaskTargetId = "com.steadybit.extension_aws.ecs-task"
	ecsTaskIcon     = "data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2048%2048%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%20%20%20%20%3Cg%20id%3D%221%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M20.25%2C36.375%20L36%2C36.375%20L36%2C34.375%20L20.25%2C34.375%20L20.25%2C36.375%20Z%20M20.25%2C24.125%20L36%2C24.125%20L36%2C22.125%20L20.25%2C22.125%20L20.25%2C24.125%20Z%20M20.25%2C11.875%20L36%2C11.875%20L36%2C9.875%20L20.25%2C9.875%20L20.25%2C11.875%20Z%20M13.375%2C37%20L16.625%2C37%20L16.625%2C33.75%20L13.375%2C33.75%20L13.375%2C37%20Z%20M12.375%2C39%20L17.625%2C39%20C18.178%2C39%2018.625%2C38.553%2018.625%2C38%20L18.625%2C32.75%20C18.625%2C32.198%2018.178%2C31.75%2017.625%2C31.75%20L12.375%2C31.75%20C11.822%2C31.75%2011.375%2C32.198%2011.375%2C32.75%20L11.375%2C38%20C11.375%2C38.553%2011.822%2C39%2012.375%2C39%20L12.375%2C39%20Z%20M13.375%2C24.75%20L16.625%2C24.75%20L16.625%2C21.5%20L13.375%2C21.5%20L13.375%2C24.75%20Z%20M12.375%2C26.75%20L17.625%2C26.75%20C18.178%2C26.75%2018.625%2C26.303%2018.625%2C25.75%20L18.625%2C20.5%20C18.625%2C19.948%2018.178%2C19.5%2017.625%2C19.5%20L12.375%2C19.5%20C11.822%2C19.5%2011.375%2C19.948%2011.375%2C20.5%20L11.375%2C25.75%20C11.375%2C26.303%2011.822%2C26.75%2012.375%2C26.75%20L12.375%2C26.75%20Z%20M13.375%2C12.5%20L16.625%2C12.5%20L16.625%2C9.25%20L13.375%2C9.25%20L13.375%2C12.5%20Z%20M12.375%2C14.5%20L17.625%2C14.5%20C18.178%2C14.5%2018.625%2C14.053%2018.625%2C13.5%20L18.625%2C8.25%20C18.625%2C7.698%2018.178%2C7.25%2017.625%2C7.25%20L12.375%2C7.25%20C11.822%2C7.25%2011.375%2C7.698%2011.375%2C8.25%20L11.375%2C13.5%20C11.375%2C14.053%2011.822%2C14.5%2012.375%2C14.5%20L12.375%2C14.5%20Z%20M9%2C44%20L38.5%2C44%20L38.5%2C4%20L9%2C4%20L9%2C44%20Z%20M39.5%2C2%20L8%2C2%20C7.447%2C2%207%2C2.448%207%2C3%20L7%2C45%20C7%2C45.553%207.447%2C46%208%2C46%20L39.5%2C46%20C40.053%2C46%2040.5%2C45.553%2040.5%2C45%20L40.5%2C3%20C40.5%2C2.448%2040.053%2C2%2039.5%2C2%20L39.5%2C2%20Z%22%20id%3D%222%22%20fill%3D%22currentColor%22%3E%3C%2Fpath%3E%0A%20%20%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E"
	ecsServiceId    = "com.steadybit.extension_aws.ecs-service"
	ecsServiceIcon  = "data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2048%2048%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%0A%3Cg%20id%3D%221%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M24.933%2C38.213%20L37.674%2C38.213%20L37.674%2C36.213%20L24.933%2C36.213%20L24.933%2C38.213%20Z%20M24.933%2C28.303%20L37.674%2C28.303%20L37.674%2C26.303%20L24.933%2C26.303%20L24.933%2C28.303%20Z%20M24.933%2C18.393%20L37.674%2C18.393%20L37.674%2C16.393%20L24.933%2C16.393%20L24.933%2C18.393%20Z%20M19.561%2C38.337%20L21.808%2C38.337%20L21.808%2C36.09%20L19.561%2C36.09%20L19.561%2C38.337%20Z%20M18.561%2C40.337%20L22.808%2C40.337%20C23.361%2C40.337%2023.808%2C39.89%2023.808%2C39.337%20L23.808%2C35.09%20C23.808%2C34.537%2023.361%2C34.09%2022.808%2C34.09%20L18.561%2C34.09%20C18.009%2C34.09%2017.561%2C34.537%2017.561%2C35.09%20L17.561%2C39.337%20C17.561%2C39.89%2018.009%2C40.337%2018.561%2C40.337%20L18.561%2C40.337%20Z%20M19.561%2C28.427%20L21.808%2C28.427%20L21.808%2C26.18%20L19.561%2C26.18%20L19.561%2C28.427%20Z%20M18.561%2C30.427%20L22.808%2C30.427%20C23.361%2C30.427%2023.808%2C29.98%2023.808%2C29.427%20L23.808%2C25.18%20C23.808%2C24.627%2023.361%2C24.18%2022.808%2C24.18%20L18.561%2C24.18%20C18.009%2C24.18%2017.561%2C24.627%2017.561%2C25.18%20L17.561%2C29.427%20C17.561%2C29.98%2018.009%2C30.427%2018.561%2C30.427%20L18.561%2C30.427%20Z%20M19.561%2C18.517%20L21.808%2C18.517%20L21.808%2C16.27%20L19.561%2C16.27%20L19.561%2C18.517%20Z%20M18.561%2C20.517%20L22.808%2C20.517%20C23.361%2C20.517%2023.808%2C20.07%2023.808%2C19.517%20L23.808%2C15.27%20C23.808%2C14.717%2023.361%2C14.27%2022.808%2C14.27%20L18.561%2C14.27%20C18.009%2C14.27%2017.561%2C14.717%2017.561%2C15.27%20L17.561%2C19.517%20C17.561%2C20.07%2018.009%2C20.517%2018.561%2C20.517%20L18.561%2C20.517%20Z%20M16.023%2C44%20L39.506%2C44%20L39.506%2C12.022%20L16.023%2C12.022%20L16.023%2C44%20Z%20M14.022%2C11.023%20L14.022%2C39.753%20L11.775%2C39.753%20L11.775%2C7.776%20L35.259%2C7.776%20L35.259%2C10.023%20L15.022%2C10.023%20C14.469%2C10.023%2014.022%2C10.47%2014.022%2C11.023%20L14.022%2C11.023%20Z%20M9.775%2C6.776%20L9.775%2C35.978%20L8%2C35.978%20L8%2C4%20L31.483%2C4%20L31.483%2C5.776%20L10.775%2C5.776%20C10.222%2C5.776%209.775%2C6.223%209.775%2C6.776%20L9.775%2C6.776%20Z%20M40.506%2C10.023%20L37.259%2C10.023%20L37.259%2C6.776%20C37.259%2C6.223%2036.811%2C5.776%2036.259%2C5.776%20L33.483%2C5.776%20L33.483%2C3%20C33.483%2C2.448%2033.036%2C2%2032.483%2C2%20L7%2C2%20C6.447%2C2%206%2C2.448%206%2C3%20L6%2C36.978%20C6%2C37.531%206.447%2C37.978%207%2C37.978%20L9.775%2C37.978%20L9.775%2C40.753%20C9.775%2C41.306%2010.222%2C41.753%2010.775%2C41.753%20L14.022%2C41.753%20L14.022%2C45%20C14.022%2C45.553%2014.469%2C46%2015.022%2C46%20L40.506%2C46%20C41.058%2C46%2041.506%2C45.553%2041.506%2C45%20L41.506%2C11.023%20C41.506%2C10.47%2041.058%2C10.023%2040.506%2C10.023%20L40.506%2C10.023%20Z%22%20id%3D%222%22%20fill%3D%22currentColor%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E"
)

// pageSize is restricted by AWS ECS API.
const pageSize = 100

func splitIntoPages[T any](input []T) [][]T {
	inputLength := len(input)
	capacity := int(math.Ceil(float64(inputLength) / float64(pageSize)))
	pages := make([][]T, 0, capacity)
	for i := 0; i < inputLength; {
		end := i + pageSize
		if end > inputLength {
			end = inputLength
		}
		pages = append(pages, input[i:end])
		i = end
	}
	return pages
}
